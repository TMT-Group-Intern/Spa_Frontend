<div class="w-full gap-x-2 grid grid-cols-3 flex-wrap h-full bg-gray-200">
  <div class="col-span-2 gap-y-2 grid grid-rows-2 flex-wrap">

    <!-- Reception -->
    <div class="row-span-1 p-4 border rounded-10 bg-white">
      <span class="text-heading-4">Reception</span>
      <div
        class="gap-x-2 grid grid-cols-3 flex-wrap overflow-y-auto mt-3"
        style="max-height: 225px"
      >
        <tds-card
          *ngFor="let appoint of reception"
          class="border rounded-10 col-span-1 mb-2"
        >
          <!-- Card Header -->
          <tds-card-header class="bg-green-success-200 text-white">
            <div class="flex justify-between">

              <p tds-typography tdsEllipsis>{{appoint.Customer.FirstName}} {{appoint.Customer.LastName}}</p>
              <div>
                <tds-tag *ngIf="appoint.Status === 'Waiting'" status='custom' class="bg-info-400">Waiting</tds-tag>
                <tds-tag *ngIf="appoint.Status === 'Examining'" status='custom'
                  class="bg-success-400">Examining</tds-tag>
              </div>
            </div>
          </tds-card-header>
          <!-- Card content -->
          <tds-card-content>
            <p><i class="tdsi-earpiece-fill text-green-success-300"></i> ABC 123456789 </p>
            <p><i class="tdsi-time-fill text-green-success-300"></i> {{formatDate(appoint.AppointmentDate,'HH:mm')}}</p>
          </tds-card-content>
        </tds-card>
      </div>
    </div>

    <!-- In ssesion -->
    <div class="row-span-1 border p-4 rounded-10 bg-white">
      <span class="text-heading-4">In Session</span>
      <div
        class="gap-x-2 grid grid-cols-3 flex-wrap overflow-y-auto mt-3"
        style="max-height: 225px"
      >
        <tds-card
          *ngFor="let appoint of inSession"
          class="border rounded-10 col-span-1 mb-2"
        >
          <!-- Card Header -->
          <tds-card-header class="bg-green-success-200 text-white ">
            <div class="flex justify-between">
              <p tds-typography tdsEllipsis>{{appoint.Customer.FirstName}} {{appoint.Customer.LastName}}</p>
              <div>
                <tds-tag *ngIf="appoint.Status === 'Preparation'" status='custom'
                  class="bg-info-400">Preparation</tds-tag>
                <tds-tag *ngIf="appoint.Status === 'Treating'" status='custom' class="bg-success-400">Treating</tds-tag>
              </div>
            </div>
          </tds-card-header>
          <div class="grid grid-cols-3 flex-wrap">
            <!-- Card content -->
            <tds-card-content class="col-span-2">
              <p><i class="tdsi-earpiece-fill text-green-success-300"></i> ABC 123456789 </p>
              <p><i class="tdsi-time-fill text-green-success-300"></i> {{formatDate(appoint.AppointmentDate,'HH:mm')}}
              </p>
            </tds-card-content>
            <!-- Card button -->
            <tds-card-actions class="col-span-1">
              <div class="flex justify-end">
                <button tds-button-icon color="secondary" tds-tooltip tooltipTitle="Edit Appointment"
                  (click)="onEditInSession(appoint.AppointmentID)">
                  <i class="tdsi-edit-fill"></i>
                </button>
              </div>
            </tds-card-actions>
          </div>
          <hr>
          <tds-card-actions class="col-span-1">
            <div class="flex justify-center">
              <button tds-button color="success" (click)="onEditPayment(appoint.AppointmentID)">
                Check Out
              </button>
            </div>
          </tds-card-actions>
        </tds-card>
      </div>
    </div>
  </div>

  <!-- Appointment List -->
  <div class="col-span-1 border p-1 rounded-10 bg-white">
    <!-- Header -->
    <div class="flex justify-between">
      <span class="text-heading-4">Today Booking</span>
      <button tds-button-icon color="success" class="rounded-full p-2" (click)="createAppointment()" tds-tooltip
        tooltipTitle="New Appointment">
        <span class="flex items-center">
          <i class="tdsi-plus-fill"></i>
        </span>
      </button>
    </div>
    <!-- List -->
    <div class="overflow-y-auto mt-3" style="max-height: 550px">
      <tds-card
        *ngFor="let appoint of todayBooking"
        class="border rounded-10 m-4"
      >
        <!-- Card Header -->
        <tds-card-header class="bg-green-success-200 text-white">
          <div class="flex justify-between">
            <p tds-typography tdsEllipsis>{{appoint.Customer.FirstName}} {{appoint.Customer.LastName}}</p>
            <div>
              <tds-tag *ngIf="appoint.Status === 'Scheduled'" status='custom' class="bg-info-400">Scheduled</tds-tag>
              <tds-tag *ngIf="appoint.Status === 'Confirmed'" status='custom' class="bg-success-400">Confirmed</tds-tag>
              <tds-tag *ngIf="appoint.Status === 'Cancelled'" status='custom' class="bg-red-500">Cancelled</tds-tag>
            </div>
          </div>
        </tds-card-header>
        <!-- Card content -->
        <tds-card-content class="">
          <p><i class="tdsi-earpiece-fill text-green-success-300"></i> ABC 123456789 </p>
          <div class="flex justify-between">
            <p><i class="tdsi-time-fill text-green-success-300"></i> {{formatDate(appoint.AppointmentDate,'HH:mm')}}</p>
            <p><i class="tdsi-call-fill text-green-success-300"></i> {{appoint.Customer.Phone}}</p>
          </div>
        </tds-card-content>
        <hr />
        <!-- Card button -->
        <tds-card-actions>
          <div class="flex justify-end">
            <button
              tds-button-icon
              color="secondary"
              tds-tooltip
              tooltipTitle="Edit Appointment"
              (click)="onEditAppointment(appoint.AppointmentID)"
            >
              <i class="tdsi-edit-fill"></i>
            </button>
            <button tds-button-icon color="secondary" tds-tooltip tooltipTitle="Switch To Reception"
              (click)="chooseDoctor(appoint.AppointmentID, 'Waiting')" class="ml-3">
              <i class="tdsi-receive-fill"></i>
            </button>
          </div>
        </tds-card-actions>
      </tds-card>
    </div>
  </div>
</div>

<!-- display of doctor -->
<div class="w-full h-full m-2 rounded-10 bg-white">
  <span class="p-4 text-heading-2">Tiếp nhận tư vấn</span>
  <div class="overflow-y-auto mt-3 flex flex-row flex-wrap justify-between">
    <tds-card *ngFor="let appoint of reception" class="w-[310px] flex border rounded-10 m-4">
      <!-- Card Header -->
      <tds-card-header class="bg-green-300 text-white">
        <div class="flex justify-between">
          <p class="text-">{{appoint.Customer.FirstName}} {{appoint.Customer.LastName}}</p>
          <tds-tag status='custom' class=" flex !bg-warning-400 p-1">{{appoint.Status}}</tds-tag>
        </div>
      </tds-card-header>
      <!-- Card content -->
      <tds-card-content class="px-3">
        <p><i class="tdsi-earpiece-fill text-green-500"></i> ABC 123456789</p>
        <div class="flex justify-between">
          <p>
            <i class="tdsi-time-fill text-green-500"></i>
            {{ formatDate(appoint.AppointmentDate, 'HH:mm') }}
          </p>
          <p>
            <i class="tdsi-call-fill text-green-500"></i>
            {{ appoint.Customer.Phone }}
          </p>
        </div>
      </tds-card-content>
      <hr />
      <!-- Card button -->
      <tds-card-actions>
        <div class="flex justify-end">
          <button tds-button-icon color="secondary" tds-tooltip tooltipTitle="Edit Appointment"
            (click)="callmodalServiceAppointment(appoint.AppointmentID)">
            <i class="tdsi-edit-fill"></i>
          </button>
        </div>
      </tds-card-actions>
    </tds-card>
  </div>
</div>
