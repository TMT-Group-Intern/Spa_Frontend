<div class="w-full gap-x-2 grid grid-cols-4 flex-wrap h-full bg-gray-200">
  <!-- Appointment List -->
  <div class="col-span-1 border p-4 rounded-10 bg-white">
    <div class="flex justify-between">
      <span class="text-heading-4">Lịch Hẹn Hôm Nay</span>

      <button
        tds-button-icon
        color="success"
        class="rounded-full p-2"
        (click)="createAppointment()"
        tds-tooltip
        tooltipTitle="New Appointment"
      >
        <span class="flex items-center">
          <i class="tdsi-plus-fill"></i>
        </span>
      </button>
    </div>
    <!-- List -->
    <div
      *ngIf="todayBooking.length === 0"
      class="flex justify-center items-center"
      style="height: 550px"
    >
      <tds-empty></tds-empty>
    </div>
    <div
      *ngIf="todayBooking.length !== 0"
      class="overflow-y-auto mt-3"
      style="max-height: 550px"
    >
      <tds-card
        *ngFor="let appoint of todayBooking"
        class="border rounded-10 m-4"
      >
        <!-- Card Header -->
        <tds-card-header class="bg-green-success-400 text-white">
          <div class="flex justify-between">
            <p tds-typography tdsEllipsis>
              {{ appoint.Customer.LastName }} {{ appoint.Customer.FirstName }}
            </p>

            <div>
              <tds-tag
                *ngIf="appoint.Status === 'Hẹn'"
                status="custom"
                class="bg-base-yellow-500"
                >Đã Hẹn</tds-tag
              >
              <tds-tag
                *ngIf="appoint.Status === 'Hủy hẹn'"
                status="custom"
                class="bg-red-500"
                >Hủy hẹn</tds-tag
              >
            </div>
          </div>
        </tds-card-header>
        <tds-card-content class="">
          <!-- <p><i class="tdsi-earpiece-fill text-green-success-300"></i> {{appoint.AppointmentID | tdsMapper: returnDoctor}}</p> -->
          <p *ngIf="appoint.Doctor === null">
            <i class="tdsi-earpiece-fill text-green-success-400"></i>
            ---
          </p>
          <p *ngIf="appoint.Doctor !== null">
            <i class="tdsi-earpiece-fill text-green-success-400"></i>
            {{ appoint.Doctor }}
          </p>

          <div class="flex justify-between">
            <p>
              <i class="tdsi-time-fill text-green-success-400"></i>
              {{ appoint.AppointmentDate | date : 'HH:mm' }}
            </p>
            <p>
              <i class="tdsi-call-fill text-green-success-400"></i>
              {{ appoint.Customer.Phone }}
            </p>
          </div>
        </tds-card-content>
        <hr />
        <tds-card-actions>
          <div class="flex justify-end">
            <button
              tds-button-icon
              color="secondary"
              tds-tooltip
              tooltipTitle="Edit Appointment"
              (click)="onEditAppointment(appoint.AppointmentID)"
            >
              <i class="tdsi-edit-fill"></i>
            </button>
            <button
              tds-button-icon
              color="secondary"
              tds-tooltip
              tooltipTitle="Switch To Reception"
              (click)="chooseDoctor(appoint.AppointmentID, 'Chờ khám')"
              class="ml-3"
            >
              <i class="tdsi-receive-fill"></i>
            </button>
          </div>
        </tds-card-actions>
      </tds-card>
    </div>
  </div>

  <div class="col-span-3 gap-y-2 grid grid-rows-2 flex-wrap">
    <!-- Reception -->
    <div class="row-span-1 p-4 border rounded-10 bg-white">
      <span class="text-heading-4">Tiếp Nhận</span>
      <div
        *ngIf="reception.length === 0"
        class="h-60 flex justify-center items-center"
      >
        <tds-empty></tds-empty>
      </div>
      <div
        *ngIf="reception.length !== 0"
        class="gap-x-2 grid grid-cols-4 flex-wrap overflow-y-auto mt-3"
        style="max-height: 225px"
      >
        <tds-card
          *ngFor="let appoint of reception"
          class="border rounded-10 col-span-1 mb-2"
        >
          <!-- Card Header -->
          <tds-card-header class="bg-green-success-400 text-white">
            <p tds-typography tdsEllipsis>
              {{ appoint.Customer.FirstName }} {{ appoint.Customer.LastName }}
            </p>
          </tds-card-header>
          <!-- Card content -->
          <tds-card-content>
            <div class="flex justify-between">
              <div>
                <p>
                  <i class="tdsi-earpiece-fill text-green-success-400"></i>
                  {{ appoint.Doctor }}
                </p>
                <p>
                  <i class="tdsi-time-fill text-green-success-400"></i>
                  {{ appoint.AppointmentDate | date : 'HH:mm' }}
                </p>
              </div>
              <div class="flex justify-center items-center">
                <tds-tag status="custom" class="bg-base-yellow-500">{{
                  appoint.Status
                }}</tds-tag>
              </div>
            </div>
          </tds-card-content>
        </tds-card>
      </div>
    </div>

    <!-- In ssesion -->
    <div class="row-span-1 border p-4 rounded-10 bg-white">
      <span class="text-heading-4">Chờ Chăm Sóc</span>
      <div
        *ngIf="inSession.length === 0"
        class="h-60 flex justify-center items-center"
      >
        <tds-empty></tds-empty>
      </div>
      <div
        *ngIf="inSession.length !== 0"
        class="gap-x-2 grid grid-cols-3 flex-wrap overflow-y-auto mt-3"
        style="max-height: 225px"
      >
        <tds-card
          *ngFor="let appoint of inSession"
          class="border rounded-10 col-span-1 mb-2"
        >
          <!-- Card Header -->
          <tds-card-header class="bg-green-success-400 text-white">
            <div class="flex justify-between">
              <p tds-typography tdsEllipsis>
                {{ appoint.Customer.FirstName }} {{ appoint.Customer.LastName }}
              </p>
              <div>
                <tds-tag
                  *ngIf="appoint.Status === 'Preparation'"
                  status="custom"
                  class="bg-info-400"
                  >Preparation</tds-tag
                >
                <tds-tag status="custom" class="bg-base-yellow-500">{{
                  appoint.Status
                }}</tds-tag>
              </div>
            </div>
          </tds-card-header>
          <div class="grid grid-cols-3 flex-wrap">
            <!-- Card content -->
            <tds-card-content class="col-span-2">
              <p *ngIf="appoint.TeachnicalStaff === null">
                <i class="tdsi-earpiece-fill text-green-success-400"></i>
                ---
              </p>
              <p *ngIf="appoint.TeachnicalStaff !== null">
                <i class="tdsi-earpiece-fill text-green-success-400"></i>
                {{ appoint.TeachnicalStaff }}
              </p>
              <p>
                <i class="tdsi-time-fill text-green-success-400"></i>
                {{ appoint.AppointmentDate | date : 'HH:mm' }}
              </p>
            </tds-card-content>
            <!-- Card button -->
            <tds-card-actions class="col-span-1">
              <div class="flex justify-end">
                <button
                  tds-button-icon
                  color="secondary"
                  tds-tooltip
                  tooltipTitle="Edit Appointment"
                  (click)="onEditInSession(appoint.AppointmentID)"
                >
                  <i class="tdsi-edit-fill"></i>
                </button>
              </div>
            </tds-card-actions>
          </div>
          <hr />
          <tds-card-actions class="col-span-1">
            <div class="flex justify-center">
              <button
                [disabled]="appoint?.Status !== 'Hoàn thành' && appoint?.Status !==  'Không sử dụng dịch vụ'"
                tds-button
                color="success"
                (click)="onEditPayment(appoint.AppointmentID)"
              >
                Thanh toán
              </button>
            </div>
          </tds-card-actions>
        </tds-card>
      </div>
    </div>
  </div>
</div>
